# set working directory
# setwd("~/UZH/Empirical Finance/Assignment 4")
setwd("C:/Users/p_lae/OneDrive - Universität Zürich UZH/Dokumente/Universität Zürich/12. Semester/Empirical Finance/EmpiricalFinance/Assignment 3")
# load libraries
library(xts)
library(PerformanceAnalytics)
library(psych)
library(roll)
library(data.table)
prices_adjusted <- read.delim(file = 'A4_dataset_01.txt', header = TRUE, sep = '\t', dec = '.')
book_values <- read.delim(file = 'A4_dataset_02.txt', header = TRUE, sep = '\t', dec = '.')
# set working directory
# setwd("~/UZH/Empirical Finance/Assignment 4")
setwd("C:/Users/p_lae/OneDrive - Universität Zürich UZH/Dokumente/Universität Zürich/12. Semester/Empirical Finance/EmpiricalFinance/Assignment 4")
prices_adjusted <- read.delim(file = 'A4_dataset_01.txt', header = TRUE, sep = '\t', dec = '.')
book_values <- read.delim(file = 'A4_dataset_02.txt', header = TRUE, sep = '\t', dec = '.')
shares <- read.delim(file = 'A4_dataset_03.txt', header = TRUE, sep = '\t', dec = '.')
prices_unadjusted <- read.delim(file = 'A4_dataset_04.txt', header = TRUE, sep = '\t', dec = '.')
riskfree <- read.delim(file = 'A4_dataset_05.txt', header = TRUE, sep = '\t', dec = '.')
factor_returns <- read.delim(file = 'A4_dataset_06.txt', header = TRUE, sep = '\t', dec = '.')
prices_adjusted <- xts(prices_adjusted[,-1], order.by = as.Date(prices_adjusted $Date, format = "%d.%m.%Y"))
returns <- Return.calculate(prices = prices_adjusted, method = 'log')
book_values <- xts(book_values[,-1], order.by = as.Date(book_values$Date, format = "%d.%m.%Y"))
shares <- xts(shares[,-1], order.by = as.Date(shares$Date, format = "%d.%m.%Y"))
prices_unadjusted <- xts(prices_unadjusted[,-1], order.by = as.Date(prices_unadjusted$Date, format = "%d.%m.%Y"))
riskfree <- xts(riskfree[,-1], order.by = as.Date(riskfree$Date, format = "%d.%m.%Y"))
factor_returns <- xts(factor_returns[,-1], order.by = as.Date(factor_returns$Date, format = "%d.%m.%Y"))
for (i in 1:384){
market_cap <- prices_unadjusted[,1:i]*shares[,1:i]
}
#2.
#View(market_cap)
for (i in 1:361){
medians <- as.data.frame(rowMedians(market_cap[1:i], na.rm = TRUE))
}
?rowMedians
install.packages("matrixStats")
library(matrixStats)
#2.
#View(market_cap)
for (i in 1:361){
medians <- as.data.frame(rowMedians(market_cap[1:i], na.rm = TRUE))
}
#View(medians)
market_cap$Median_CAP <- medians[,1]
#View(medians)
medians$Median_CAP <- medians[,1]
market_cap$Median_CAP <- medians$Median_CAP
View(market_cap)
market_cap$Median_CAP <- NULL
View(market_cap)
#View(medians)
market_cap$Median_CAP <- medians[,1]
View(market_cap)
View(market_cap)
S_portfolio <- market_cap
library(dplyr)
S_portfolio <- market_cap
for (i in 1:(ncol(S_portfolio)-1)){
S_portfolio %>%
mutate(i = ifelse(i<Median_Cap, 1, NA))
}
for (i in 1:(ncol(S_portfolio)-1)){
S_portfolio %>%
transform(i = ifelse(i<Median_Cap, 1, NA))
}
for (i in 1:(ncol(S_portfolio)-1)){
S_portfolio %>%
transform(i = ifelse(i<Median_CAP, 1, NA))
}
View(S_portfolio)
S_portfolio[1,] %>%
tranform(ROG = ifelse(ROG<Median_CAP,1,NA))
S_portfolio[1,] %>%
transform(ROG = ifelse(ROG<Median_CAP,1,NA))
for (i in 1:(ncol(S_portfolio)-1)){
S_portfolio %>%
transform(i = ifelse(i<Median_CAP, 1, NA))
}
View(S_portfolio)
S_portfolio <- market_cap
for (i in 1:384){
S_portfolio %>%
transform(i = ifelse(i<Median_CAP, 1, NA))
}
S_portfolio %>%
transform(ROG = ifelse(ROG<Median_CAP,1,NA))
View(S_portfolio)
S_portfolio %>%
transform(ROG = ifelse(ROG>Median_CAP,1,NA))
View(S_portfolio)
